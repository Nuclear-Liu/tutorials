# MongoDB 概述

文档 集合 数据库

## 文档

**文档**: MongoDB 数据中的基本单元（对应关系数据库中的**行**）

  * 文档是键值对的**有序**集；文档的**键**是**字符串**，值是受支持的类型（UTF-8）。
  * 文档区分类型与大小写。
  * 文档内包含重复的**键**。
  * 文档内键/值对是有顺序的，不同的顺序为不同的文档数据。

## 集合

**集合**: MongoDB 数据中支持动态模式的**表**，集合由**文档**组成
  
  一组**文档**构成集合
  * 集合支持动态模式
  * 集合名称支持 UTF-8
  * 集合名称不能为空串(`""`)
  * 集合名称不能包含空子符(`\0`)（表示集合名的结束）或美元符(`$`)
  * 集合名称不能以 `system.` 开头（系统集合使用）
  
> **子集合**
> 
> 使用 `.` 分隔不同命名空间的子集合；使数据的组织结构更加清晰。
> 
> GridFS 使用子集合存储文件的元数据与文件内容块隔离；


> 集合的**完全限定名**: (`<database-name>.<collection-name>.<subcollection-name>`) 使用 `.` 连接数据库名称获得。

## 数据库

**数据库**: MongoDB 实例可以拥有多个数据库，数据库由**集合**组成；在一个 MongoDB 实例中可以承载多个数据库
  * 每个数据库有独立的权限
  * 不同的数据库存放在不同的文件中
  * 数据库名称支持 UTF-8
  * 数据库名称不能是空串 (`""`)
  * 数据库名称不能包含: `/` `\` `.` `"` `*` `<` `>` `:` `|` `?` `$` ` ` `\0`
  * 数据库名称区分大小写；建议全部使用小写
  * 数据库名称最长 64 字节
  
MongoDB 自带数据库：

  * `admin`: 从身份验证的角度，就是 `root` 数据库
    
    * 将一个用户添加到 `admin` 数据库，用户将自动获得所有数据库的权限；
    * 运行特定的服务端命令（如列出所有数据库、关闭服务器等）
    
  * `local`: (永远不被复制)存储服务器上的所有**本地集合**
  * `config`: 存储配置信息（分片信息）

## 数据类型

### 基本数据类型

> JSON 数据类型： `null`(空) `boolean`(布尔值) `number`(数字) `string`(字符串) ``(数组) ``()

MongoDB 在 JSON 基本键/值对特性的基础上，添加了数据类型。

#### `null`: `null` 用于表示**空值**或者不存在的字段
#### `boolean`: `true`/`false`
#### `number`: 默认使用 64 位浮点型数值； 对于整型数： `NumberInt`(4 字节有符号整数) `NumberLong`(8字节有符号整数)
#### `string`: UTF-8 字符串
#### `date`: 日期被存储为自新纪元以来经过的毫秒数，不存储时区 `new Date()`

`new Date()` 创建日期对象

#### `rgx`: 正则表达式，语法与 JavaScript 正则表达式语法相同
    
    查询时，使用正则表达式作为限定条件
#### `array`: 数组（数据列表或数据集） `[]`

数组可以包含不同数据类型的元素，数组中可以嵌套数组。

> MongoDB 能够理解文档中的数组，并且知道如何深入数组内部对其内部进行操作。
> 
> 能够使用数组内容对数组进行查询和构建索引。

#### `object`: 内嵌文档，被嵌套的文档作为父文档的值

文档可以作为键的值，这样的文档就是内嵌文档。

> MongoDB 能够理解内嵌文档的结构，并且能够深入其中构建索引、执行查询或更新

#### `ObjectId`: 对象 id (12 字节的 ID，文档的唯一标识) `new ObjectId()`

`ObjectId` 是 `_id` 的默认类型。

#### `BinaryData`: 二进制数据，是任意字节的字符串
#### `JavaScript`: 代码， JavaScript 代码
