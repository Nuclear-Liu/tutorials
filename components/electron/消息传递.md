# 消息传递

`MessagePort` 允许在不同上下文之间传递消息的 Web 功能。
Electron 扩展 **Channel Messaging model** 提供 `MessagePortMain` `MessageChannelMain` 处理**主进程**消息功能。
主进程不是网页（没有集成 `Blink` ）。

* `MessageChannelMain` 主进程中用于通道消息传递**通道**接口 -- 主进程中等价 DOM `MessageChannel` 对象
    
    创建**一对已连接**的 `MessagePortMain` 对象
    
* `MessagePortMain` 主进程中用于通道消息传递的**端口**接口 -- 主进程中等价 DOM `MessagePort` 对象

    `MessagePortMain` 行为类似于 DOM 中的 `MessagePort` ；
    `MessagePortMain` 使用 Node.js 的 `EventEmitter` 事件系统，代替 DOM `EventTarget` 系统：

    > 使用 `port.on('message', ...)` 监听事件，替代 `port.onmessage = ...` / `port.addEventListener('message', ...)` 

可以在**渲染器进程**或**主进程**中创建 `MessagePort` 对象，使用 `ipcRenderer.postMessage` `WebContents.postMessage` 方法互相传递

> 通常 IPC 方法 (`send` `invoke`) 不能用来传输 `MessagePort` ；
> 
> 使用 **`postMessage`** 方法传输 `MessagePort`

通过**主进程传递** `MessagePort` 可以连接两个可能无法通信的页面。

## 主进程中的消息传递


