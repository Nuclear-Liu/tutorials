# 上下文隔离

上下文隔离功能确保将 **`preload` 脚本** 与 **Electron 的内部逻辑**运行所加载的 `webcontent` 页面之外的独立上下文环境中。

（Electron 12 以来，默认启用上下文隔离）因为上下文隔离，预加载脚本访问的 `window` 对象并不是页面渲染进程所能访问的对象。

Electron 提供了 `contextBridge` 模块可以用来安全地从独立运行、上下文隔离的预加载脚本中暴露 API 给正在婞的渲染进程。

单单开启和使用 `contextIsolation` 并不一定意味安全；
暴露进程间通信相关 API 的正确方法是为每一种通信消息提供**一种实现方法**。

```js
// ✅ 正确使用
contextBridge.exposeInMainWorld('myAPI', {
  loadPreferences: () => ipcRenderer.invoke('load-prefs')
})
```
